import pygame
from random import choice


BG_COLOR = (50, 50, 50)
SIZE = (509, 509)

COLORS = ((227, 76, 0), (227, 227, 0), (57, 227, 0), (0, 227, 227), (113, 0, 227), (227, 0, 113))

window = pygame.display.set_mode(SIZE)
screen = pygame.Surface(SIZE)


class Plitka:
    color = (150, 40, 40)
    DEACTIVE_COLOR = (150, 150, 150)
    CLICKED_COLOR = (255, 255, 255)  # цвет когда плитка нажата
    HOVER_COLOR = (180, 150, 150)  # цвет плиток, на которые наведен курсор

    def __init__(self, x, y, surface, color=color):
        self.image = pygame.Surface((50, 50))
        self.rect = self.image.get_rect()
        self.rect.x = x
        self.rect.y = y
        self.color = color
        self.surface = surface
        self.image.fill(self.color)
        self.is_selected = False
        self.is_deactive = False

    # отрисовка плиток
    def draw(self):
        self.change_color()
        self.surface.blit(self.image, (self.rect.x, self.rect.y))

    # меняет цвета плиток, если на нее кликнули
    def change_color(self):
        if self.clicked() or self.is_selected:
            self.image.fill(self.CLICKED_COLOR)
        elif self.collide_cursor():
            pygame.draw.rect(self.surface, self.HOVER_COLOR, self.rect, 4)
        elif self.is_deactive:
            pygame.draw.rect(self.surface, self.CLICKED_COLOR, self.rect, 4)
        else:
            self.image.fill(self.color)

    # отслеживает нажата ли какая нибудь плитка
    def clicked(self):
        if self.collide_cursor():
            return pygame.mouse.get_pressed() == (1, 0, 0)  # если зажата левая кнопка мыши

    # определяет находится ли курсор над текущей плиткой
    def collide_cursor(self):
        mx, my = pygame.mouse.get_pos()
        return self.rect.left < mx < self.rect.right and self.rect.top < my < self.rect.bottom
        # возврат выполнения этого условия, либо True, либо False

plitki = []
for row in range(10):
    for col in range(10):
        plitki.append(Plitka(x=row*51, y=col*51, surface=screen, color=choice(COLORS)))


running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    screen.fill(BG_COLOR)
    for i in plitki:
        i.draw()

    window.blit(screen, (0, 0))
    pygame.display.flip()
